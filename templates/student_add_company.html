<!DOCTYPE html>
<html lang="en" class="no-js">
    <!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8"/>
        <title>BigIntern</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="" name="description"/>
        <meta content="" name="author"/>

        <!-- GLOBAL MANDATORY STYLES -->
        <link href="http://fonts.googleapis.com/css?family=Hind:300,400,500,600,700" rel="stylesheet" type="text/css">
        <link href="/static/vendor/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
        <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

        <!-- PAGE LEVEL PLUGIN STYLES -->
        <link href="static/css/animate.css" rel="stylesheet">
        <link href="static/vendor/swiper/css/swiper.min.css" rel="stylesheet" type="text/css"/>

        <!-- THEME STYLES -->
        <link href="/static/css/layout.min.css" rel="stylesheet" type="text/css"/>
     
        <!-- Specify STYLES -->
        <link href="/static/css/student_details.css" rel="stylesheet" type="text/css"/>
        <!-- Favicon -->
        <link rel="shortcut icon" href="favicon.ico"/>
    </head>
    <!-- END HEAD -->

    <!-- BODY -->
    <body>

        <!--========== HEADER ==========-->
        <header class="header navbar-fixed-top">
            <!-- Navbar -->
            <nav class="navbar" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="menu-container">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="toggle-icon"></span>
                        </button>

                        <!-- Logo -->
                        <div class="logo">
                            <a class="logo-wrap" href="index.html">
                                <img class="logo-img logo-img-main" src="/static/img/logo.png" alt="Asentus Logo">
                                <img class="logo-img logo-img-active" src="/static/img/logo-dark.png" alt="Asentus Logo">
                            </a>
                        </div>
                        <!-- End Logo -->
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse nav-collapse">
                        <div class="menu-container">
                            <ul class="navbar-nav navbar-nav-right">
                                <li class="nav-item"><a class="nav-item-child nav-item-hover active" href="{{url_for('index')}}">Home</a></li>
                                <li class="nav-item"><a class="nav-item-child nav-item-hover" href="{{url_for('about')}}">Portfolio</a></li>
                                <li class="nav-item"><a class="nav-item-child nav-item-hover" href="{{url_for('student')}}">Student Dashboard</a></li>
                                {% if status == "LoggedIn" %}
                                <li class="nav-item"><a class="nav-item-child nav-item-hover" href="{{ url_for('logout') }}">Logout</a></li>
                                {% else %}
                                <li class="nav-item"><a class="nav-item-child nav-item-hover" href="{{ url_for('login') }}">Login</a></li>
                                {% endif %}
                    
                            </ul>
                        </div>
                    </div>
                    <!-- End Navbar Collapse -->
                </div>
            </nav>
            <!-- Navbar -->
        </header>
        <!--========== END HEADER ==========-->

        <!--========== PARALLAX ==========-->
        <div class="parallax-window" data-parallax="scroll" data-image-src="/static/img/1920x1080/01.jpg">
            <div class="parallax-content container">
                <h1 class="carousel-title">Student Details</h1>
                <p> Student Details page offers a comprehensive overview of students details, highlighting their internship placement details,<br/>
                    progress report, and relevant information, empowering you to stay informed and connected.</p>
            </div>
        </div>
        <!--========== PARALLAX ==========-->

        <!--========== PAGE LAYOUT ==========-->
        <!-- About -->
        <div class="content-lg container">
            <div class="row margin-b-20">
                <div class="col-sm-6">
                    <h2>Personal Details</h2>
                </div>
            </div>
            <!--// end row -->

            <div class="row">
                <div class="col-sm-4 sm-margin-b-50">
                    <img class="data_image" src="{{ student[9] }}" alt="Student Image"> <!--get from database-->
                </div>
                
                <div class="col-sm-7 sm-margin-b-50">
                    <div class="margin-b-30">
                                <div class="output_group">
                                    <p class="data_stud_name">{{ student[1] }}</p>
                                </div>
                        <table class="tPersonalDetails">
                            <tr class="studD_row">
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_email">Email:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_email">{{ student[2] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_phone">Phone No:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_phone">{{ student[5] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        
                            <tr class="studD_row">
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_gender">Gender:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_gender">{{ student[3] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_age">Age:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_age">{{ student[6] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        
                            <tr class="studD_row">
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_programme">Programme:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_programme">{{ student[4] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                                <td class="studD_Col">
                                    <div class="stud_info">
                                        <div class="input_group">
                                            <p class="header_stud_cohort">Cohort:</p>
                                        </div>
                                        <div class="output_group">
                                            <p class="data_stud_cohort">{{ student[7] }}</p>  <!--get from database-->
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
              
                </div>
             
            </div>
            <!--// end row -->
        </div>
        <!-- End About -->

          <!-- Team -->
          <div class="bg-color-sky-light">
            <div class="content-lg container">
               
                        <h2>Internship Company Details</h2>
                        <form  action="/add_intern_details" method="POST">
                            <input type="hidden" name="internship_id" value="{{ internship_id }}">
                            <table class="tCompDetails">
                                <tr class="compD_row">
                                    <td class="compD_Col">
                                        <div class="comp_info">
                                            <div class="input_group">
                                                <p class="header_comp_name">Company Name</p>
                                            </div>
                                            <div class="output_group">
                                                <select name="company" id="company" class="form-control">
                                                    {% for company in companies %}
                                                        <option value="{{ company[1] }}">{{ company[1] }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td class="compD_Col">
                                        <div class="comp_info">
                                            <div class="input_group">
                                                <p class="header_comp_job">Job Position</p>
                                            </div>
                                            <div class="output_group">
                                           
                                                    <select name="job_position" id="job_position" class="form-control">
                                                        <option value="">Select Job Position</option>
                                                    </select>
                                            </div>
                                        </div>
                                    </td>
                                    
                    
                                </tr>
                            
                                <tr class="compD_row">
                                    <td class="compD_Col">
                                        <div class="comp_info">
                                            <div class="input_group">
                                                <p class="header_comp_duration">Duration</p>
                                            </div>
                                            <div class="output_group">
                                                <select name="job_duration" id="job_duration" class="form-control">
                                                    <option value="3">3 Months</option>
                                                    <option value="6">6 Months</option>
                                                    <option value="9">9 Months</option>
                                                </select>
                                            </div>
                                        </div>
                                    </td>

                                    <td class="compD_Col">
                                        <div class="comp_info">
                                            <div class="input_group">
                                                <p class="header_comp_allowance">Allowance</p>
                                            </div>
                                            <div class="output_group">
                                                    <input name="job_allowance" id="job_allowance" value=""></input>
                                            </div>
                                        </div>
                                    </td>

                                </tr>
                                <tr class="compD_row">
                                    <td class="compD_Col">
                                        <button type="submit" class="addButton">Add Company</button>
                                    </td>
                                </tr>
                               
                        </table>
                       
                        </form>
                    
<!--button container here-->


            </div>
        </div>
        <!-- End Team -->

          <!-- About -->
          <div class="content-lg container">
            <h2>Progress Report</h2>
            <!--// end row -->
            <table class="report-table">
                <thead>
                    <tr>
                        <th class="bordered">Number</th>
                        <th class="bordered">Report Name</th>
                        <th class="bordered">Status</th>
                        <th class="bordered">Due Date</th>
                        <th class="bordered">Date Submitted</th>

                    </tr>
                </thead>
                <tbody>
                    {% for report in reports %}
                        <tr class="row_report">
                            <td class="bordered">{{ loop.index }}</td> {# This line adds the counter #}
                            <td class="bordered">{{ report[1] }}</td>
                            <td class="bordered">{{ report[2] }}</td>
                            <td class="bordered">{{ report[3] }}</td>
                            <td class="bordered">{{ report[4] }}</td>
                                <td>
                                    <form action="/supervisor/{{ student[0] }}" method="POST" enctype="multipart/form-data" class="report_form">
                                        <input type="hidden" name="report_id" value="{{ report[0] }}">
                                        {% if report[5] is not none %}
                                            <a href="{{ report[5] }}" class="view-button" target="_blank">View</a>
                                        {% else %}
                                            <input class="file_button" type="submit" value="Upload Report">
                                            <input class="upload_file_button" type="file" name="file">
                                        {% endif %}
                                    </form>
                                </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            </div>
            <!--// end row -->
        </div>
        <!-- End About -->
        <!--========== END PAGE LAYOUT ==========-->

        <!--========== FOOTER ==========-->
        <footer class="footer">
            <!-- Links -->
            <div class="footer-seperator">
                <div class="content-lg container">
                    <div class="row">
                        <div class="col-sm-2 sm-margin-b-50">
                            <!-- List -->
                            <ul class="list-unstyled footer-list">
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Home</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">About</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Products</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Pricing</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Clients</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Careers</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Contact</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Terms</a></li>
                            </ul>
                            <!-- End List -->
                        </div>
                        <div class="col-sm-4 sm-margin-b-30">
                            <!-- List -->
                            <ul class="list-unstyled footer-list">
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Twitter</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Facebook</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">Instagram</a></li>
                                <li class="footer-list-item"><a class="footer-list-link" href="#">YouTube</a></li>
                            </ul>
                            <!-- End List -->
                        </div>
                        <div class="col-sm-5 sm-margin-b-30">
                            <h2 class="color-white">Send Us A Note</h2>
                            <input type="text" class="form-control footer-input margin-b-20" placeholder="Name" required>
                            <input type="email" class="form-control footer-input margin-b-20" placeholder="Email" required>
                            <input type="text" class="form-control footer-input margin-b-20" placeholder="Phone" required>
                            <textarea class="form-control footer-input margin-b-30" rows="6" placeholder="Message" required></textarea>
                            <button type="submit" class="btn-theme btn-theme-sm btn-base-bg text-uppercase">Submit</button>
                        </div>
                    </div>
                    <!--// end row -->
                </div>
            </div>
            <!-- End Links -->

            <!-- Copyright -->
            <div class="content container">
                <div class="row">
                    <div class="col-xs-6">
                        <img class="footer-logo" src="/static/img/logo.png" alt="Asentus Logo">
                    </div>
                    <div class="col-xs-6 text-right">
                        <p class="margin-b-0"><a class="color-base fweight-700" href="http://keenthemes.com/preview/asentus/">Asentus</a> Theme Powered by: <a class="color-base fweight-700" href="http://www.keenthemes.com/">KeenThemes.com</a></p>
                    </div>
                </div>
                <!--// end row -->
            </div>
            <!-- End Copyright -->
        </footer>
        <!--========== END FOOTER ==========-->

        <!-- Back To Top -->
        <a href="javascript:void(0);" class="js-back-to-top back-to-top">Top</a>

        <!-- JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
        <!-- CORE PLUGINS -->
        <script src="/static/vendor/jquery.min.js" type="text/javascript"></script>
        <script src="/static/vendor/jquery-migrate.min.js" type="text/javascript"></script>
        <script src="/static/vendor/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

        <!-- PAGE LEVEL PLUGINS -->
        <script src="/static/vendor/jquery.easing.js" type="text/javascript"></script>
        <script src="/static/vendor/jquery.back-to-top.js" type="text/javascript"></script>
        <script src="/static/vendor/jquery.smooth-scroll.js" type="text/javascript"></script>
        <script src="/static/vendor/jquery.wow.min.js" type="text/javascript"></script>
        <script src="/static/vendor/jquery.parallax.min.js" type="text/javascript"></script>
        <script src="/static/vendor/swiper/js/swiper.jquery.min.js" type="text/javascript"></script>

        <!-- PAGE LEVEL SCRIPTS -->
        <script src="/static/js/layout.min.js" type="text/javascript"></script>
        <script src="/static/js/components/swiper.min.js" type="text/javascript"></script>
        <script src="/static/js/components/wow.min.js" type="text/javascript"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Get references to the company and job position dropdowns
                const companyDropdown = document.getElementById("company");
                const jobPositionDropdown = document.getElementById("job_position");
            
                // Add an event listener to the company dropdown
                companyDropdown.addEventListener("change", function () {
                    const selectedCompanyId = this.value;
            
                    // Disable the job position dropdown initially
                    jobPositionDropdown.disabled = true;
            
                    // Clear existing options
                    jobPositionDropdown.innerHTML = '<option value="">Select Job Position</option>';
            
                    if (selectedCompanyId) {
                        // Make an AJAX request to fetch job positions for the selected company
                        // You'll need to define the URL for your Flask route to fetch job positions
                        const url = "/get_job_positions";

            
                        fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/x-www-form-urlencoded",
                        },
                        body: `company_id=${selectedCompanyId}`,
                    })
                        .then((response) => response.json())
                        .then((data) => {
                            // Enable the job position dropdown
                            jobPositionDropdown.disabled = false;

                            // Clear existing options
                            jobPositionDropdown.innerHTML = '<option value="">Select Job Position</option>';

                            // Populate job positions based on the response data
                            data.job_positions.forEach((jobPosition) => {
                                const option = document.createElement("option");
                                option.value = jobPosition.id;
                                option.textContent = jobPosition.name;
                                jobPositionDropdown.appendChild(option);
                            });
                        })
    .catch((error) => {
        console.error("Error fetching job positions:", error);
    });

                    }
                });
            });


            const jobPositionDropdown = document.getElementById("job_position");
const allowanceInput = document.getElementById("job_allowance");

jobPositionDropdown.addEventListener("change", function () {
    const selectedJobPositionId = this.value;

    // Fetch the allowance based on the selected job position
    if (selectedJobPositionId) {
        const url = "/get_allowance";

        fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: `job_position_id=${selectedJobPositionId}`,
        })
        .then((response) => response.json())
        .then((data) => {
            // Set the allowance input value based on the response data
            allowanceInput.value = data.allowance;
        })
        .catch((error) => {
            console.error("Error fetching allowance:", error);
        });
    } else {
        // Clear the allowance input if no job position is selected
        allowanceInput.value = "";
    }
});


            </script>


        
    </body>
    <!-- END BODY -->
</html>